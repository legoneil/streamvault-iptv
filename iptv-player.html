<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamVault - Advanced IPTV Player</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%2300f0ff'/%3E%3Cstop offset='50%25' stop-color='%230080ff'/%3E%3Cstop offset='100%25' stop-color='%23ff00aa'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='%230a0e17'/%3E%3Ccircle cx='50' cy='50' r='35' fill='none' stroke='url(%23g)' stroke-width='3'/%3E%3Cpath d='M 40 32 L 40 68 L 68 50 Z' fill='url(%23g)'/%3E%3Ccircle cx='50' cy='50' r='3' fill='url(%23g)'/%3E%3C/svg%3E">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%2300f0ff'/%3E%3Cstop offset='50%25' stop-color='%230080ff'/%3E%3Cstop offset='100%25' stop-color='%23ff00aa'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='%230a0e17'/%3E%3Ccircle cx='50' cy='50' r='35' fill='none' stroke='url(%23g)' stroke-width='3'/%3E%3Cpath d='M 40 32 L 40 68 L 68 50 Z' fill='url(%23g)'/%3E%3Ccircle cx='50' cy='50' r='3' fill='url(%23g)'/%3E%3C/svg%3E">
    
    <!-- Meta tags for PWA -->
    <meta name="theme-color" content="#0a0e17">
    <meta name="description" content="StreamVault - Advanced IPTV Player with Xtreme Codes and M3U support">
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="bg-animation"></div>

    <!-- Welcome Screen (Shows saved playlist option) -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-container">
            <h1 class="login-logo">STREAMVAULT</h1>
            <p class="login-subtitle">Advanced IPTV Player System</p>

            <div id="savedPlaylistSection" style="display: none;">
                <!-- Saved playlist will be inserted here -->
            </div>

            <div class="divider">OR</div>

            <button class="btn-primary" onclick="showLoginScreen()" style="width: 100%;">
                ‚ûï Add New Playlist
            </button>
        </div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <button class="back-btn" onclick="showWelcomeScreen()">‚Üê Back</button>
            
            <h1 class="login-logo">STREAMVAULT</h1>
            <p class="login-subtitle">Connect Your IPTV Service</p>

            <div class="tab-selector">
                <button class="tab-btn active" onclick="switchLoginTab('xtreme')">Xtreme Codes</button>
                <button class="tab-btn" onclick="switchLoginTab('m3u')">M3U Playlist</button>
            </div>

            <!-- Xtreme Codes Login -->
            <form class="login-form active" id="xtremeForm" onsubmit="loginXtreme(event)">
                <div class="form-group">
                    <label class="form-label">Server URL</label>
                    <input type="text" class="form-input" id="xtremeServer" placeholder="http://example.com:8080" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="xtremeUsername" placeholder="Your username" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="xtremePassword" placeholder="Your password" required>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="rememberXtreme" checked>
                    <label for="rememberXtreme">Remember my credentials</label>
                </div>
                <button type="submit" class="login-btn">Connect</button>
            </form>

            <!-- M3U Playlist Login -->
            <form class="login-form" id="m3uForm" onsubmit="loginM3U(event)">
                <div class="form-group">
                    <label class="form-label">M3U Playlist URL</label>
                    <input type="url" class="form-input" id="m3uUrl" placeholder="http://example.com/playlist.m3u" required>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="rememberM3U" checked>
                    <label for="rememberM3U">Remember my playlist</label>
                </div>
                <button type="submit" class="login-btn">Load Playlist</button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
        <!-- Mobile Overlay -->
        <div class="mobile-overlay" id="mobileOverlay" onclick="closeMobileMenu()"></div>
        
        <!-- Header -->
        <header class="header">
            <div class="header-logo">STREAMVAULT</div>
            <div class="header-search">
                <input type="text" class="search-input" id="searchInput" placeholder="Search channels..." onkeyup="searchChannels()">
            </div>
            <div class="header-controls">
                <button class="header-btn" onclick="toggleFavorites()">‚≠ê Favorites</button>
                <button class="header-btn" onclick="logout()">Logout</button>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <h3 class="section-title">Categories</h3>
                <ul class="channel-list" id="categoryList"></ul>
            </div>
            <div class="sidebar-section">
                <h3 class="section-title">Channels</h3>
                <ul class="channel-list" id="channelList"></ul>
            </div>
        </aside>

        <!-- Player Container -->
        <div class="player-container">
            <div class="video-wrapper">
                <video id="videoPlayer" controls></video>
                
                <div class="video-overlay">
                    <div class="video-info">
                        <div class="video-title" id="currentChannelName">Select a channel</div>
                        <div class="video-subtitle" id="currentProgramInfo">No program info available</div>
                    </div>
                </div>

                <div class="loading" id="loadingSpinner">
                    <div class="spinner"></div>
                </div>
            </div>

            <!-- EPG Panel -->
            <div class="epg-panel" id="epgPanel">
                <h3 class="epg-header">üì∫ Program Guide</h3>
                <div id="epgContent">
                    <p style="color: var(--text-secondary); text-align: center; padding: 20px;">
                        Select a channel to view program guide
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()">
            ‚ò∞
        </button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="app.js"></script>
</body>
</html>
